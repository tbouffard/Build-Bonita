language: java
jdk: openjdk8
os: linux
dist: trusty

before_cache:
  # Maven: ensure that we do not keep bonitasoft artifacts across builds
  - rm -rf $HOME/.m2/repository/org/bonitasoft
  # Gradle: see https://docs.travis-ci.com/user/languages/java/#projects-using-gradle
  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
    # Maven dependencies and wrappers
    - $HOME/.m2
    # Gradle caches and wrapper
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/

branches:
  only:
  - master

env:
  global:
    - SCRIPT_BUILD_NO_CLEAN=true
    - SCRIPT_BUILD_QUIET=true

script: ./build-script.sh
